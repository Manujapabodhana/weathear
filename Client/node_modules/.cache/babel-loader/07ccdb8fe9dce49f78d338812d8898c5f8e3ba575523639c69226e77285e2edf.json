{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import\"./App.css\";import Header from\"./components/Header\";import SearchBar from\"./components/SearchBar\";import WeatherGrid from\"./components/WeatherGrid\";import WeatherDetail from\"./components/WeatherDetail\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function App(){const[cities,setCities]=useState([]);const[selected,setSelected]=useState(null);const[query,setQuery]=useState(\"\");const[err,setErr]=useState(\"\");// load initial list (from cities.json via backend)\nuseEffect(()=>{(async()=>{try{const{data}=await axios.get(\"/api/weather\");setCities(data.cities||[]);}catch(e){setErr(\"Failed to load weather\");}})();},[]);// handle search by name -> open as detail or add to grid\nasync function onSearch(e){e.preventDefault();const q=query.trim();if(!q)return;try{const{data}=await axios.get(\"/api/weather/by-name\",{params:{name:q}});setSelected(data);// show the detail screen\nsetErr(\"\");}catch(_unused){setErr(\"No weather found for that name\");}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-clouds\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(SearchBar,{query:query,setQuery:setQuery,onSearch:onSearch}),err&&/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\",color:\"#ffb4b4\"},children:err})]}),selected?/*#__PURE__*/_jsx(WeatherDetail,{data:selected,onBack:()=>setSelected(null)}):/*#__PURE__*/_jsx(WeatherGrid,{list:cities,onOpen:setSelected})]});}","map":{"version":3,"names":["useEffect","useState","axios","Header","SearchBar","WeatherGrid","WeatherDetail","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","cities","setCities","selected","setSelected","query","setQuery","err","setErr","data","get","e","onSearch","preventDefault","q","trim","params","name","_unused","children","className","style","textAlign","color","onBack","list","onOpen"],"sources":["D:/aluth project/weathear/Client/src/App.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./App.css\";\r\nimport Header from \"./components/Header\";\r\nimport SearchBar from \"./components/SearchBar\";\r\nimport WeatherGrid from \"./components/WeatherGrid\";\r\nimport WeatherDetail from \"./components/WeatherDetail\";\r\n\r\nexport default function App() {\r\n  const [cities, setCities] = useState([]);\r\n  const [selected, setSelected] = useState(null);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  // load initial list (from cities.json via backend)\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await axios.get(\"/api/weather\");\r\n        setCities(data.cities || []);\r\n      } catch (e) {\r\n        setErr(\"Failed to load weather\");\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  // handle search by name -> open as detail or add to grid\r\n  async function onSearch(e) {\r\n    e.preventDefault();\r\n    const q = query.trim();\r\n    if (!q) return;\r\n\r\n    try {\r\n      const { data } = await axios.get(\"/api/weather/by-name\", {\r\n        params: { name: q },\r\n      });\r\n      setSelected(data); // show the detail screen\r\n      setErr(\"\");\r\n    } catch {\r\n      setErr(\"No weather found for that name\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bg-clouds\" />\r\n      <div className=\"container\">\r\n        <Header />\r\n        <SearchBar query={query} setQuery={setQuery} onSearch={onSearch} />\r\n        {err && <p style={{ textAlign: \"center\", color: \"#ffb4b4\" }}>{err}</p>}\r\n      </div>\r\n\r\n      {selected ? (\r\n        <WeatherDetail data={selected} onBack={() => setSelected(null)} />\r\n      ) : (\r\n        <WeatherGrid list={cities} onOpen={setSelected} />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,WAAW,CAClB,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,aAAa,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvD,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAG,CAC5B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACmB,GAAG,CAAEC,MAAM,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAElC;AACAD,SAAS,CAAC,IAAM,CACd,CAAC,SAAY,CACX,GAAI,CACF,KAAM,CAAEsB,IAAK,CAAC,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,cAAc,CAAC,CAChDR,SAAS,CAACO,IAAI,CAACR,MAAM,EAAI,EAAE,CAAC,CAC9B,CAAE,MAAOU,CAAC,CAAE,CACVH,MAAM,CAAC,wBAAwB,CAAC,CAClC,CACF,CAAC,EAAE,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,cAAe,CAAAI,QAAQA,CAACD,CAAC,CAAE,CACzBA,CAAC,CAACE,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,CAAC,CAAGT,KAAK,CAACU,IAAI,CAAC,CAAC,CACtB,GAAI,CAACD,CAAC,CAAE,OAER,GAAI,CACF,KAAM,CAAEL,IAAK,CAAC,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,sBAAsB,CAAE,CACvDM,MAAM,CAAE,CAAEC,IAAI,CAAEH,CAAE,CACpB,CAAC,CAAC,CACFV,WAAW,CAACK,IAAI,CAAC,CAAE;AACnBD,MAAM,CAAC,EAAE,CAAC,CACZ,CAAE,MAAAU,OAAA,CAAM,CACNV,MAAM,CAAC,gCAAgC,CAAC,CAC1C,CACF,CAEA,mBACEX,KAAA,CAAAE,SAAA,EAAAoB,QAAA,eACExB,IAAA,QAAKyB,SAAS,CAAC,WAAW,CAAE,CAAC,cAC7BvB,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBxB,IAAA,CAACL,MAAM,GAAE,CAAC,cACVK,IAAA,CAACJ,SAAS,EAACc,KAAK,CAAEA,KAAM,CAACC,QAAQ,CAAEA,QAAS,CAACM,QAAQ,CAAEA,QAAS,CAAE,CAAC,CAClEL,GAAG,eAAIZ,IAAA,MAAG0B,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAJ,QAAA,CAAEZ,GAAG,CAAI,CAAC,EACnE,CAAC,CAELJ,QAAQ,cACPR,IAAA,CAACF,aAAa,EAACgB,IAAI,CAAEN,QAAS,CAACqB,MAAM,CAAEA,CAAA,GAAMpB,WAAW,CAAC,IAAI,CAAE,CAAE,CAAC,cAElET,IAAA,CAACH,WAAW,EAACiC,IAAI,CAAExB,MAAO,CAACyB,MAAM,CAAEtB,WAAY,CAAE,CAClD,EACD,CAAC,CAEP","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}